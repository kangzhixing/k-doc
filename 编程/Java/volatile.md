## volatile
一个被volatile声明的变量主要有以下两种特性保证保证线程安全
- 可见性  
将当前处理器缓存行的数据会写回到系统内存。
这个写回内存的操作会引起在其他CPU里缓存了该内存地址的数据无效
- 有序性  
虚拟机在进行代码编译优化的时候，对于那些改变顺序之后不会对最终变量的值造成影响的代码，volatile可防止编译器将他们进行重排序。
```java
int a = 10;
int b = 5;
```

### MESI（缓存一致协议）

**M(Modified)**

这行数据有效，缓存数据被修改了，和内存中的数据不一致，数据只存在于本Cache中。

**E(Exclusive)**

这行数据有效，缓存数据和内存中的数据一致，数据只存在于本Cache中。

**S(Shared)**

这行数据有效，缓存数据和内存中的数据一致，数据存在于很多Cache中。

**I(Invalid)**

缓存数据无效。

### 非线程安全
volatile不能保证原子性，比如
```java
i++
```
该操作分为读取计算和写回，所以该操作并非原子的，volatile并没有对于属性提供原子性。
